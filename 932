#runtime is O(n log n) and memory O(n)

def beautifulArray(self, n):
        memo = {1: [1]}
        
        def helper(n):
            if n in memo:
                return memo[n]
            
            # left half (odds), right half (evens)
            odds = helper((n + 1) // 2)
            evens = helper(n // 2)
            
            # map to odds and evens
            res = [2*x - 1 for x in odds] + [2*x for x in evens]
            memo[n] = res
            return res
        
        return helper(n)
